/*! ember-sockets by Adam Timberlake created on 2013-10-26 */
!function(a,b){"use strict";a.ES={},a.ES.Module=b.ObjectController.extend({host:"localhost",port:80,controllers:[],socket:null,init:function(){var a="http://%@:%@".fmt(b.get(this,"host"),b.get(this,"port")),c=io.connect(a);this.set("socket",c),c.on("connect",this._listen.bind(this))},emit:function(a,c){b.get(this,"socket").emit(a,c)},_listen:function(){var a=b.get(this,"controllers"),c=this._getController.bind(this),d=[],e=b.EnumerableUtils,f=this;e.forEach(a,function(a){var e=c(a),g=e.sockets;if(e)for(var h in g)if(g.hasOwnProperty(h)){if(-1!==d.indexOf(h))continue;d.push(h),b.get(f,"socket").on(h,f._update.bind(f))}})},_update:function(a){var c=b.get(this,"controllers"),d=0,e=this._getController.bind(this);return b.EnumerableUtils.forEach(c,function(c){var f=e(c);if(f){var g=f.sockets.cherryPickedName;if(!g)return;b.set(f,g,a),d++}}),d},_getController:function(a){a="controller:%@".fmt(a);var b=this.container.lookup(a);return b&&"sockets"in b!=!1?b:!1}}),Ember.onLoad("Ember.Application",function(a){a.initializer({name:"sockets",initialize:function(a,b){b.register("socket:main",b.Socket,{singleton:!0}),b.inject("controller","socket","socket:main")}})})}(window,window.Ember);